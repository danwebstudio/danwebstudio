<!DOCTYPE html><html lang='en'><head><meta charset='utf-8'><title>web tools</title><meta name="description" content="web tools"><meta name="keywords" content="web tools"></head><body><div><style>* { box-sizing: border-box; } body {margin: 0;}*{box-sizing:border-box;}body{margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;font-family:Arial, sans-serif;max-width:800px;padding-top:20px;padding-right:20px;padding-bottom:20px;padding-left:20px;text-align:center;}.panel{color:rgb(51, 51, 51);font-weight:100;}.logo path{pointer-events:none;fill:none;stroke-linecap:round;stroke-width:7;stroke:rgb(255, 255, 255);}.description{text-align:center;font-size:1em;font-weight:500;line-height:1.8rem;margin-bottom:1rem;}.wechat-group{text-align:center;padding-bottom:10px;}.wechat-group img{max-width:220px;height:auto;border-top-left-radius:8px;border-top-right-radius:8px;border-bottom-right-radius:8px;border-bottom-left-radius:8px;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:100%;}.welcome-img img{width:100%;}.bg-gradient-primary{border-top-left-radius:8px;border-top-right-radius:8px;border-bottom-right-radius:8px;border-bottom-left-radius:8px;}#videoPreview-2{max-width:100%;display:block;margin-top:10px;margin-right:auto;margin-bottom:10px;margin-left:auto;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(221, 221, 221);border-right-color:rgb(221, 221, 221);border-bottom-color:rgb(221, 221, 221);border-left-color:rgb(221, 221, 221);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;}#canvasOutput-2{max-width:100%;display:block;margin-top:10px;margin-right:auto;margin-bottom:10px;margin-left:auto;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(221, 221, 221);border-right-color:rgb(221, 221, 221);border-bottom-color:rgb(221, 221, 221);border-left-color:rgb(221, 221, 221);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;}#result-2{margin-top:20px;text-align:left;white-space-collapse:preserve;text-wrap-mode:wrap;background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(245, 245, 245);padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;}button{padding-top:10px;padding-right:20px;padding-bottom:10px;padding-left:20px;background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(66, 133, 244);color:white;border-top-width:initial;border-right-width:initial;border-bottom-width:initial;border-left-width:initial;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-top-color:initial;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;cursor:pointer;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;margin-top:5px;margin-right:5px;margin-bottom:5px;margin-left:5px;}button:disabled{background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(204, 204, 204);}.progress-bar{width:100%;background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(224, 224, 224);border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;}.progress{height:10px;background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(66, 133, 244);border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;width:0%;}</style><div id="default-editor-page__placeholder" class="panel"><link rel="stylesheet" href="css/plugins.css"/><link rel="stylesheet" href="css/style.css"/><section class="wrapper bg-gradient-primary"><div class="container py-18 pt-md-14 pb-md-14"><div class="row text-center"><div class="col-lg-9 col-xxl-7 mx-auto"><h2 class="display-1 mb-4">示例页面，免费在线网页制作工具</h2><p class="lead fs-24 lh-sm px-md-5 px-xl-15 px-xxl-10 mb-7">兼顾设计师和开发者，所见即所得，无需代码经验轻松上手</p></div><!-- /column --></div><!-- /.row --><div class="d-flex justify-content-center"><span><a href="https://htmlpage.cn/builder/" class="btn btn-lg btn-primary rounded-pill mx-1">马上使用</a></span><span><a href="https://htmlpage.cn/contact" class="btn btn-lg btn-outline-primary rounded-pill mx-1">联系我们</a></span></div><!-- /div --><div class="row mt-10"><div class="col-lg-8 mx-auto"><figure></figure></div><!-- /column --></div><div><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>影片逐幀數字識別</title><h1>影片逐幀數字識別</h1><p>上傳影片，自動分析每一幀的數字</p><input type="file" id="videoInput-2" accept="video/*"/><br/><button id="startBtn-2" disabled>開始分析</button><button id="stopBtn-2" disabled>停止</button><div class="progress-bar"><div id="progressBar-2" class="progress"></div></div><div><h3>影片預覽：</h3><video allowfullscreen="allowfullscreen" id="videoPreview-2" controls="controls" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3R5bGU9ImZpbGw6IHJnYmEoMCwwLDAsMC4xNSk7IHRyYW5zZm9ybTogc2NhbGUoMC43NSkiPgogICAgICAgIDxwYXRoIGQ9Ik04LjUgMTMuNWwyLjUgMyAzLjUtNC41IDQuNSA2SDVtMTYgMVY1YTIgMiAwIDAgMC0yLTJINWMtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnoiPjwvcGF0aD4KICAgICAgPC9zdmc+"></video><canvas id="canvasOutput-2"></canvas></div><div><h3>識別結果：</h3><pre id="result-2"></pre></div><script>
        const videoInput = document.getElementById('videoInput');
        const videoPreview = document.getElementById('videoPreview');
        const canvasOutput = document.getElementById('canvasOutput');
        const ctx = canvasOutput.getContext('2d');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const result = document.getElementById('result');
        const progressBar = document.getElementById('progressBar');

        let isProcessing = false;
        let frameCount = 0;
        let totalFrames = 0;

        // 載入影片並啟用開始按鈕
        videoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            videoPreview.src = URL.createObjectURL(file);
            startBtn.disabled = false;
        });

        // 開始逐幀分析
        startBtn.addEventListener('click', async function() {
            const video = videoPreview;
            if (!video.src) return;

            isProcessing = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            result.textContent = "開始分析...\n";
            frameCount = 0;

            // 計算影片總幀數（簡化：假設 30 FPS）
            totalFrames = Math.floor(video.duration * 30);

            // 設定 Canvas 尺寸
            canvasOutput.width = video.videoWidth;
            canvasOutput.height = video.videoHeight;

            // 逐幀處理
            video.currentTime = 0;
            video.addEventListener('seeked', processFrame);

            // 手動觸發第一幀
            video.currentTime = 0;
        });

        // 停止分析
        stopBtn.addEventListener('click', function() {
            isProcessing = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            result.textContent += "\n已停止分析";
        });

        // 處理單一幀

    async function processFrame() {
        if (!isProcessing) return;

        const video = videoPreview;
        ctx.drawImage(video, 0, 0, canvasOutput.width, canvasOutput.height);
        
        try {
            const { data: { text } } = await Tesseract.recognize(
                canvasOutput,
                'eng',
                { logger: m => console.log(m) }
            );

            // 重點修改：只抓取 "SPEED:" 後的數字
            const speedMatch = text.match(/SPEED:\s*([\d.]+)/i);
            if (speedMatch) {
                const speedValue = speedMatch[1];
                result.textContent += `[${formatTime(video.currentTime)}] SPEED: ${speedValue}\n`;
            }
        } catch (error) {
            console.error("OCR 錯誤:", error);
        }

        // 更新進度條
        frameCount++;
        const progress = (frameCount / totalFrames) * 100;
        progressBar.style.width = `${progress}%`;

        // 繼續下一幀（每 0.5 秒取一幀）
        if (video.currentTime < video.duration && isProcessing) {
            video.currentTime += 0.5;
        } else {
            isProcessing = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            result.textContent += "\n分析完成！";
        }
    }


        // 格式化時間 (00:00.000)
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            const ms = Math.floor((seconds % 1) * 1000);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}.${ms.toString().padStart(3, '0')}`;
        }
    </script><script src="js/tesseract.min.js"></script></div><!-- /.row --></div><!-- /.container --></section><section class="wrapper bg-gradient-primary"><div class="container pt-14 pb-8"><div class="row text-center"><div class="col-lg-9 col-xxl-7 mx-auto"><h2 class="display-1 mb-4">扫描二维码加入交流群</h2><p class="lead fs-24 lh-sm px-md-5 px-xl-15 px-xxl-10 mb-7">使用过程中遇到问题，可以在群里求助</p></div><!-- /column --></div></div></section><div class="wechat-group pb-12"><img src="img/wechat-group-3.jpeg"/></div><div class="description">© 2023 Lapus. 版权所有</div></div></div></body></html>
